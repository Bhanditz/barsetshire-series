var barsetshireVis={draw:function(){var t=d3.select("#body"),e=t.select("#vis");d3.json("data/data.json",function(t,n){var a=e.selectAll(".topicbins").data(n).enter(),r=a.append("div").attr("class","topicholder");r.append("div").attr("class","topictext").append("text").text(function(t){return t.topic});var i=r.append("div").attr("class","topicbin"),o=i.append("div").attr("class","seriesbin"),s=(d3.scale.category20b(),o.append("g")),l=$(".topicbin").width(),c=$(".topicbin").height(),d=.02,p=313;$(".seriesbin").width(l*(1-d));var u=$(".seriesbin").width()/p*.97,b=s.selectAll(".books").data(function(t){return t.books}).enter().append("div").attr("class","bookbin").style("width",function(t){return u*t.totalchap+"px"}),h=b.append("svg").attr("class","booksvg"),g=h.selectAll(".chapter").data(function(t){return t.b}).enter().append("g").attr("class","chapbin").attr("transform",function(t,e){var n=u*e,a=0;return"translate("+n+","+a+")"}),f=d3.scale.linear().domain([0,.04]).range([0,1]);g.append("rect").attr("class",function(t){var e=t.chap,n=e.split(" "),a="";for(x in n)a+=n[x];return a}).attr("y",function(t){return c/6}).attr("width",u).attr("height",c*(2/3)).style("opacity",function(t){return f(t.val)}).on("mouseover",function(t){d3.select("#chapterbox").append("text").text(t.chap),d3.select("#valuebox").append("text").text(t.val)}).on("mouseout",function(t){d3.select("#chapterbox text").remove(),d3.select("#valuebox text").remove()})})},rectGrow:function(t,e){d3.selectAll(t).transition().duration(800).attr("y",0).attr("height",e)},rectShrink:function(t,e,n){d3.selectAll(t).transition().duration(800).attr("y",function(){return n/6+10}).attr("height",e)},toggleVis:function(){var t=$(".topicbin").height(),e=t/6,n=t*(2/3);1==$("button").hasClass("button-off")?(barsetshireVis.toggleCompress(),$("button").attr("class","btn button-on")):(console.log("nerd"),barsetshireVis.toggleExtend(e,n),$("button").attr("class","btn button-off"))},toggleCompress:function(){d3.selectAll(".topicholder").transition().style("margin-bottom","0px"),d3.selectAll(".topicbin").transition().delay(750).duration(900).style("border","none");var t=$(".topicbin").height();d3.selectAll("rect").transition().delay(1400).attr("y",0),d3.selectAll("rect").transition().delay(2e3).duration(1e3).attr("height",t)},toggleExtend:function(t,e){d3.selectAll("rect").transition().attr("y",t).attr("height",e),d3.selectAll(".topicbin").transition().style("border","1px solid black"),d3.selectAll(".topicholder").transition().style("margin-bottom","20px")},titleDraw:function(t){console.log(t);var e=d3.select("#titles").append("svg").attr({width:"100%",height:"30px"});e.selectAll("titlenames").data(t).enter().append("text").text(function(t){return t.name}).attr({y:20,x:function(t){return t.xval},"text-anchor":"center","class":"titletext"})}};
