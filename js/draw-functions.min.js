var barsetshireVis={draw:function(b,e,d,a,f){var g=d3.select("#body");var c=g.select("#vis");d3.json(b,function(v,y){var n=c.selectAll(".topicbins").data(y).enter();var r=n.append("div").attr("class","topicholder");r.append("div").attr("class","topictext").append("text").text(function(z){return z.topic});var u=r.append("div").attr("class","topicbin");var p=u.append("div").attr("class","seriesbin");var l=d3.scale.category20b();var o=p.append("g");var x=$(".topicbin").width(),t=$(".topicbin").height(),h=0.05,j=h*x,s=j/(f+1);$(".seriesbin").css("margin-left",s);var q=($(".seriesbin").width()*(1-h))/a;var m=o.selectAll(".books").data(function(z){return z.books}).enter().append("div").attr("class","bookbin").style("width",function(z){return q*z.totalchap+"px"}).style("margin-right",s+"px");var w=m.append("svg").attr("class","booksvg");var i=w.selectAll(".chapter").data(function(z){return z.b}).enter().append("g").attr("class","chapbin").attr("transform",function(C,A){var B=q*A,z=0;return"translate("+B+","+z+")"});var k=d3.scale.linear().domain([e,d]).range([0,1]);i.append("rect").attr("y",function(z){return t/6}).attr("width",q).attr("height",t*(2/3)).style("opacity",function(z){return k(z.val)}).on("mouseover",function(z){d3.select("#chapterbox").append("text").text(z.chap);d3.select("#valuebox").append("text").text(z.val)}).on("mouseout",function(z){d3.select("#chapterbox text").remove();d3.select("#valuebox text").remove()})})},rectGrow:function(b,a){d3.selectAll(b).transition().duration(800).attr("y",0).attr("height",a)},rectShrink:function(c,a,b){d3.selectAll(c).transition().duration(800).attr("y",function(){return b/6+10}).attr("height",a)},toggleVis:function(){var c=$(".topicbin").height();var b=c/6,a=c*(2/3);if($("button").hasClass("button-off")==true){barsetshireVis.toggleCompress();$("button").attr("class","btn button-on")}else{barsetshireVis.toggleExtend(b,a);$("button").attr("class","btn button-off")}},toggleCompress:function(){d3.selectAll(".topicholder").transition().style("margin-bottom","0px");d3.selectAll(".topicbin").transition().delay(750).duration(900).style("border","none");var a=$(".topicbin").height();d3.selectAll("rect").transition().delay(1400).attr("y",0);d3.selectAll("rect").transition().delay(2000).duration(1000).attr("height",a)},toggleExtend:function(b,a){d3.selectAll("rect").transition().attr("y",b).attr("height",a);d3.selectAll(".topicbin").transition().style("border","1px solid black");d3.selectAll(".topicholder").transition().style("margin-bottom","20px")},titleDraw:function(b){var a=d3.select("#titles").append("svg").attr({width:"100%",height:"30px"});a.selectAll("titlenames").data(b).enter().append("text").text(function(c){return c.name}).attr({y:20,x:function(c){return c.xval},"text-anchor":"center","class":"titletext"})}};